<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Nederlands – Hoe laat is het?</title>

<style>
  body {
    font-family: system-ui, sans-serif;
    background: #f2f2f2;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    margin: 0;
  }

  /* ====== КЛЮЧЕВОЕ: РЕЗИНОВЫЙ SVG ====== */
  svg {
    width: min(90vw, 80vh, 520px);
    height: auto;
    margin-bottom: 20px;
  }

  .clock-face {
    fill: white;
    stroke: #333;
    stroke-width: 4;
  }

  .number {
    font-size: 14px;
    text-anchor: middle;
    dominant-baseline: middle;
    fill: #111;
  }

  .hour-hand {
    stroke: #111;
    stroke-width: 6;
    stroke-linecap: round;
    transform-origin: 100px 100px;
    transition: transform 0.4s ease;
  }

  .minute-hand {
    stroke: #111;
    stroke-width: 4;
    stroke-linecap: round;
    transform-origin: 100px 100px;
    transition: transform 0.4s ease;
  }

  .center {
    fill: #111;
  }

  .controls {
    display: flex;
    gap: 16px;
    margin: 10px 0 16px;
  }

  button {
    padding: 14px 24px;
    font-size: 18px;
    border-radius: 999px;
    border: none;
    background: #e5e5e5;
  }

  button:active {
    transform: scale(0.97);
  }

  .text {
    font-size: 24px;
    font-weight: 500;
    text-align: center;
  }

  /* ====== DESKTOP ====== */
  @media (min-width: 900px) {
    svg {
      width: min(70vw, 70vh, 700px);
    }

    .number {
      font-size: 16px;
    }

    .text {
      font-size: 28px;
    }

    button {
      font-size: 20px;
      padding: 16px 30px;
    }
  }
</style>
</head>

<body>

<svg viewBox="0 0 200 200">
  <circle cx="100" cy="100" r="95" class="clock-face"/>
  <g id="numbers"></g>

  <line id="hourHand" x1="100" y1="100" x2="100" y2="55" class="hour-hand"/>
  <line id="minuteHand" x1="100" y1="100" x2="100" y2="35" class="minute-hand"/>

  <circle cx="100" cy="100" r="4" class="center"/>
</svg>

<div class="controls">
  <button onclick="nextTime()">Volgende</button>
  <button onclick="repeatTime()">Herhaal</button>
</div>

<div class="text" id="text"></div>

<script>
/* ---------- ЦИФЕРБЛАТ ---------- */

const numbersGroup = document.getElementById("numbers");

for (let i = 1; i <= 12; i++) {
  const angle = (i - 3) * 30 * Math.PI / 180;
  const x = 100 + Math.cos(angle) * 75;
  const y = 100 + Math.sin(angle) * 75;

  const t = document.createElementNS("http://www.w3.org/2000/svg", "text");
  t.setAttribute("x", x);
  t.setAttribute("y", y);
  t.textContent = i;
  t.classList.add("number");
  numbersGroup.appendChild(t);
}

const hourHand = document.getElementById("hourHand");
const minuteHand = document.getElementById("minuteHand");

function setTime(hour, minutes) {
  minuteHand.style.transform = `rotate(${minutes * 6}deg)`;
  hourHand.style.transform =
    `rotate(${(hour % 12) * 30 + minutes * 0.5}deg)`;
}

/* ---------- ЛОГИКА NL ---------- */

const patterns = [
  { key: "uur", minutes: 0, label: "uur" },
  { key: "vijf over", minutes: 5 },
  { key: "tien over", minutes: 10 },
  { key: "kwart over", minutes: 15 },
  { key: "tien voor half", minutes: 20 },
  { key: "vijf voor half", minutes: 25 },
  { key: "half", minutes: 30 },
  { key: "vijf over half", minutes: 35 },
  { key: "tien over half", minutes: 40 },
  { key: "kwart voor", minutes: 45 },
  { key: "tien voor", minutes: 50 },
  { key: "vijf voor", minutes: 55 }
];

const hours = [
  "een","twee","drie","vier","vijf","zes",
  "zeven","acht","negen","tien","elf","twaalf"
];

function generateDutchTime() {
  const h = Math.floor(Math.random() * 12);
  const p = patterns[Math.floor(Math.random() * patterns.length)];

  // --- spoken hour (для текста) ---
  let spokenHourIndex = h;
  if (p.key.includes("half") || p.key.includes("voor")) {
    spokenHourIndex = (h + 1) % 12;
  }

  // --- real hour (для стрелки) ---
  const realHour = h + 1;
  const minutes = p.minutes;

  const text =
    p.key === "uur"
      ? `Het is ${hours[spokenHourIndex]} uur`
      : `Het is ${p.key} ${hours[spokenHourIndex]}`;

  return {
    text,
    hour: realHour,
    minutes
  };
}
/* ---------- ОЗВУЧКА ---------- */

function speakDutch(text) {
  speechSynthesis.cancel();
  const u = new SpeechSynthesisUtterance(text);
  u.lang = "nl-NL";
  u.rate = 0.9;
  speechSynthesis.speak(u);
}

/* ---------- УПРАВЛЕНИЕ ---------- */

let current = null;

function nextTime() {
  current = generateDutchTime();
  setTime(current.hour, current.minutes);
  document.getElementById("text").textContent = current.text;
  speakDutch(current.text);
}

function repeatTime() {
  if (current) speakDutch(current.text);
}

nextTime();
</script>

</body>
</html>
