<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8" />
    <title>Nederlands – Hoe laat is het?</title>

    <style>
        body {
            font-family: system-ui, sans-serif;
            background: #f2f2f2;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 30px;
        }

        svg {
            width: 300px;
            height: 300px;
        }

        .clock-face {
            fill: white;
            stroke: #333;
            stroke-width: 4;
        }

        .number {
            font-size: 14px;
            text-anchor: middle;
            dominant-baseline: middle;
            fill: #111;
        }

        .hour-hand {
            stroke: #111;
            stroke-width: 6;
            stroke-linecap: round;
            transform-origin: 100px 100px;
            transition: transform 0.4s ease;
        }

        .minute-hand {
            stroke: #111;
            stroke-width: 4;
            stroke-linecap: round;
            transform-origin: 100px 100px;
            transition: transform 0.4s ease;
        }

        .center {
            fill: #111;
        }

        .controls {
            margin-top: 20px;
        }

        button {
            margin: 0 6px;
            padding: 10px 16px;
            font-size: 16px;
        }

        .text {
            margin-top: 20px;
            font-size: 20px;
            font-weight: 500;
        }
    </style>
</head>

<body>

<svg viewBox="0 0 200 200">
    <!-- циферблат -->
    <circle cx="100" cy="100" r="95" class="clock-face"/>

    <!-- цифры -->
    <g id="numbers"></g>

    <!-- стрелки -->
    <line id="hourHand" x1="100" y1="100" x2="100" y2="55" class="hour-hand"/>
    <line id="minuteHand" x1="100" y1="100" x2="100" y2="35" class="minute-hand"/>

    <!-- центр -->
    <circle cx="100" cy="100" r="4" class="center"/>
</svg>

<div class="controls">
    <button onclick="nextTime()">Volgende</button>
    <button onclick="repeatTime()">Herhaal</button>
</div>

<div class="text" id="text"></div>

<script>
    /* ------------------ ЦИФЕРБЛАТ ------------------ */

    const numbersGroup = document.getElementById("numbers");

    for (let i = 1; i <= 12; i++) {
        const angle = (i - 3) * 30 * Math.PI / 180;
        const x = 100 + Math.cos(angle) * 75;
        const y = 100 + Math.sin(angle) * 75;

        const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
        text.setAttribute("x", x);
        text.setAttribute("y", y);
        text.textContent = i;
        text.classList.add("number");

        numbersGroup.appendChild(text);
    }

    const hourHand = document.getElementById("hourHand");
    const minuteHand = document.getElementById("minuteHand");

    function setTime(hour, minutes) {
        const minuteAngle = minutes * 6;
        const hourAngle = (hour % 12) * 30 + minutes * 0.5;

        minuteHand.style.transform = `rotate(${minuteAngle}deg)`;
        hourHand.style.transform = `rotate(${hourAngle}deg)`;
    }

    /* ------------------ ЛОГИКА NL ------------------ */

    const patterns = [
        { key: "uur", minutes: 0, label: "uur" },
        { key: "vijf_over", minutes: 5, label: "vijf over" },
        { key: "tien_over", minutes: 10, label: "tien over" },
        { key: "kwart_over", minutes: 15, label: "kwart over" },

        { key: "tien_voor_half", minutes: 20, label: "tien voor half" },
        { key: "vijf_voor_half", minutes: 25, label: "vijf voor half" },

        { key: "half", minutes: 30, label: "half" },

        { key: "vijf_over_half", minutes: 35, label: "vijf over half" },
        { key: "tien_over_half", minutes: 40, label: "tien over half" },

        { key: "kwart_voor", minutes: 45, label: "kwart voor" },
        { key: "tien_voor", minutes: 50, label: "tien voor" },
        { key: "vijf_voor", minutes: 55, label: "vijf voor" }
    ];

    const hours = [
        "een", "twee", "drie", "vier", "vijf", "zes",
        "zeven", "acht", "negen", "tien", "elf", "twaalf"
    ];

    function generateDutchTime() {
        const hourIndex = Math.floor(Math.random() * 12);
        const pattern = patterns[Math.floor(Math.random() * patterns.length)];

        let spokenHourIndex = hourIndex;
        let realHour = hourIndex + 1;
        const minutes = pattern.minutes;

        if (pattern.key.includes("half") || pattern.key.includes("voor")) {
            spokenHourIndex = (hourIndex + 1) % 12;
        }

        if (minutes >= 20) {
            realHour = ((hourIndex + 1) % 12) + 1;
        }

        let text;
        if (pattern.key === "uur") {
            text = `Het is ${hours[spokenHourIndex]} uur`;
        } else {
            text = `Het is ${pattern.label} ${hours[spokenHourIndex]}`;
        }

        return { text, hour: realHour, minutes };
    }

    /* ------------------ ОЗВУЧКА ------------------ */

    function speakDutch(text) {
        speechSynthesis.cancel();

        const u = new SpeechSynthesisUtterance(text);
        u.lang = "nl-NL";
        u.rate = 0.9;
        u.pitch = 1.0;

        speechSynthesis.speak(u);
    }

    /* ------------------ УПРАВЛЕНИЕ ------------------ */

    let currentTime = null;

    function nextTime() {
        currentTime = generateDutchTime();
        setTime(currentTime.hour, currentTime.minutes);
        document.getElementById("text").textContent = currentTime.text;
        speakDutch(currentTime.text);
    }

    function repeatTime() {
        if (currentTime) {
            speakDutch(currentTime.text);
        }
    }

    /* старт */
    nextTime();
</script>

</body>
</html>
